<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Сілтеме Генераторы</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }
        .icon-lg {
            width: 32px;
            height: 32px;
            fill: currentColor;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-green-50 to-green-100 p-4">
    <div class="max-w-md mx-auto">
        <!-- Басты -->
        <div class="text-center mb-8 pt-8">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-green-500 rounded-full mb-4">
                <svg class="icon-lg text-white" viewBox="0 0 24 24">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
            </div>
            <h1 class="text-2xl font-bold text-gray-800 mb-2">
                WhatsApp Сілтеме Генераторы
            </h1>
            <p class="text-gray-600 text-sm">
                Телефон нөмірі мен хабарламаны енгізіп, дайын сілтеме алыңыз
            </p>
        </div>

        <!-- Форма -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <!-- Телефон нөмірі -->
            <div class="mb-6">
                <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                    <svg class="icon mr-2 text-green-500" viewBox="0 0 24 24">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                    </svg>
                    Телефон нөмірі
                </label>
                <input
                    type="tel"
                    id="phoneNumber"
                    placeholder="87001234567 немесе +77001234567"
                    class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none transition-colors"
                />
                <p class="text-xs text-gray-500 mt-1">
                    Нөмір автоматты форматталады (максимум 11 сан)
                </p>
            </div>

            <!-- Хабарлама -->
            <div class="mb-6">
                <label class="flex items-center text-sm font-medium text-gray-700 mb-2">
                    <svg class="icon mr-2 text-green-500" viewBox="0 0 24 24">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        <path d="M13 8H7"/>
                        <path d="M17 12H7"/>
                    </svg>
                    Хабарлама (қосымша)
                </label>
                <textarea
                    id="message"
                    placeholder="Сәлеметсіз бе! Сізбен байланысқа шығу керек еді..."
                    rows="4"
                    class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none transition-colors resize-none"
                ></textarea>
            </div>

            <!-- Сілтеме жасау батырмасы -->
            <button
                onclick="generateLink()"
                class="w-full bg-green-500 hover:bg-green-600 text-white font-medium py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2"
            >
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                </svg>
                <span>Сілтеме жасау</span>
            </button>
        </div>

        <!-- Нәтиже -->
        <div id="result-section" class="bg-white rounded-2xl shadow-lg p-6" style="display: none;">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">
                Дайын сілтеме:
            </h3>
            
            <!-- Сілтеме -->
            <div class="bg-gray-50 rounded-xl p-4 mb-4">
                <p id="generated-link" class="text-sm text-gray-600 break-all font-mono"></p>
            </div>

            <!-- Батырмалар -->
            <div class="flex space-x-3">
                <button
                    onclick="copyToClipboard()"
                    id="copy-btn"
                    class="flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-medium transition-colors duration-200 bg-blue-50 text-blue-600 border border-blue-200 hover:bg-blue-100"
                >
                    <svg class="icon" viewBox="0 0 24 24">
                        <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                        <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                    </svg>
                    <span>Көшіру</span>
                </button>
                
                <button
                    onclick="openWhatsApp()"
                    class="flex-1 flex items-center justify-center space-x-2 bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-xl font-medium transition-colors duration-200"
                >
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                        <polyline points="15,3 21,3 21,9"/>
                        <line x1="10" x2="21" y1="14" y2="3"/>
                    </svg>
                    <span>Ашу</span>
                </button>
            </div>
        </div>

        <!-- Ақпарат -->
        <div class="mt-8 text-center">
            <p class="text-xs text-gray-500">
                Бұл құрал WhatsApp-қа тікелей сілтеме жасайды. <br />
                Сілтемені кез келген жерде пайдалануға болады.
            </p>
        </div>

        <!-- Жасаушы -->
        <div class="mt-6 text-center">
            <p class="text-xs text-gray-400">
                by 
                <a 
                    href="https://www.instagram.com/nurserikz" 
                    target="_blank" 
                    rel="noopener noreferrer"
                    class="text-green-600 hover:text-green-700 font-medium transition-colors duration-200"
                >
                    Nurserikz
                </a>
            </p>
        </div>
    </div>

    <script>
        let generatedLink = '';

        function formatPhoneNumber(number) {
            const cleaned = number.replace(/\D/g, '');
            
            if (cleaned.startsWith('8')) {
                return '7' + cleaned.slice(1);
            }
            
            if (cleaned.startsWith('7')) {
                return cleaned;
            }
            
            return '7' + cleaned;
        }

        function formatDisplayNumber(number) {
            const cleaned = number.replace(/\D/g, '');
            const limited = cleaned.slice(0, 11);
            
            if (limited.length === 0) return '';
            if (limited.length === 1) return limited;
            if (limited.length <= 4) return limited.slice(0, 1) + ' ' + limited.slice(1);
            if (limited.length <= 7) return limited.slice(0, 1) + ' ' + limited.slice(1, 4) + ' ' + limited.slice(4);
            if (limited.length <= 9) return limited.slice(0, 1) + ' ' + limited.slice(1, 4) + ' ' + limited.slice(4, 7) + ' ' + limited.slice(7);
            return limited.slice(0, 1) + ' ' + limited.slice(1, 4) + ' ' + limited.slice(4, 7) + ' ' + limited.slice(7, 9) + ' ' + limited.slice(9);
        }

        document.getElementById('phoneNumber').addEventListener('input', function(e) {
            const formatted = formatDisplayNumber(e.target.value);
            e.target.value = formatted;
        });

        function generateLink() {
            const phoneNumber = document.getElementById('phoneNumber').value;
            const message = document.getElementById('message').value;

            if (!phoneNumber.trim()) {
                alert('Телефон нөмірін енгізіңіз!');
                return;
            }

            const formattedPhone = formatPhoneNumber(phoneNumber);
            const encodedMessage = encodeURIComponent(message.trim());
            
            let link = `https://wa.me/${formattedPhone}`;
            if (message.trim()) {
                link += `?text=${encodedMessage}`;
            }
            
            generatedLink = link;
            document.getElementById('generated-link').textContent = link;
            document.getElementById('result-section').style.display = 'block';
            
            setTimeout(() => {
                document.getElementById('result-section').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
            }, 100);
        }

        function copyToClipboard() {
            const copyBtn = document.getElementById('copy-btn');
            
            navigator.clipboard.writeText(generatedLink).then(() => {
                copyBtn.innerHTML = `
                    <svg class="icon" viewBox="0 0 24 24">
                        <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                        <path d="M4 16c-1.1 0-2-.9-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                    </svg>
                    <span>Көшірілді!</span>
                `;
                copyBtn.className = 'flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-medium transition-colors duration-200 bg-green-100 text-green-700 border border-green-200';
                
                setTimeout(() => {
                    copyBtn.innerHTML = `
                        <svg class="icon" viewBox="0 0 24 24">
                            <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                            <path d="M4 16c-1.1 0-2-.9-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                        </svg>
                        <span>Көшіру</span>
                    `;
                    copyBtn.className = 'flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-medium transition-colors duration-200 bg-blue-50 text-blue-600 border border-blue-200 hover:bg-blue-100';
                }, 2000);
            }).catch(() => {
                // Fallback
                const textArea = document.createElement('textarea');
                textArea.value = generatedLink;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                copyBtn.innerHTML = `
                    <svg class="icon" viewBox="0 0 24 24">
                        <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                        <path d="M4 16c-1.1 0-2-.9-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                    </svg>
                    <span>Көшірілді!</span>
                `;
                copyBtn.className = 'flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-medium transition-colors duration-200 bg-green-100 text-green-700 border border-green-200';
                
                setTimeout(() => {
                    copyBtn.innerHTML = `
                        <svg class="icon" viewBox="0 0 24 24">
                            <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                            <path d="M4 16c-1.1 0-2-.9-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                        </svg>
                        <span>Көшіру</span>
                    `;
                    copyBtn.className = 'flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-medium transition-colors duration-200 bg-blue-50 text-blue-600 border border-blue-200 hover:bg-blue-100';
                }, 2000);
            });
        }

        function openWhatsApp() {
            if (generatedLink) {
                window.open(generatedLink, '_blank');
            }
        }
    </script>
</body>
</html>
